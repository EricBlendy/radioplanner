<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radio Show Producer Clock</title>
    <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-database-compat.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #1a1a1a; color: white; padding: 20px; }
        .schedule-grid { max-width: 800px; margin: 0 auto; display: grid; gap: 10px; }
        .segment { display: flex; align-items: center; background: #333; padding: 10px; border-radius: 5px; }
        .time { width: 80px; font-weight: bold; color: #00d4ff; }
        input { flex-grow: 1; padding: 10px; border: none; border-radius: 3px; background: #444; color: white; font-size: 1rem; }
        input:focus { background: #555; outline: 2px solid #00d4ff; }
        h1 { text-align: center; color: #00d4ff; }
    </style>
</head>
<body>

    <h1>ON-AIR PRODUCER PLANNER</h1>
    <div id="schedule" class="schedule-grid">
        </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

<script>
    // YOUR SPECIFIC CONFIGURATION
    const firebaseConfig = {
        // You can find your specific apiKey in Project Settings > General in Firebase
        // But for the Realtime Database to work, the databaseURL is the key piece:
        databaseURL: "https://radioplanner-d6a88-default-rtdb.asia-southeast1.firebasedatabase.app/"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Select the container where we will build the schedule
    const scheduleContainer = document.getElementById('schedule');
    
    // Create 16 slots (4 hours total, 15 mins each)
    for (let i = 0; i < 16; i++) {
        const totalMinutes = i * 15;
        const hours = Math.floor(totalMinutes / 60);
        const mins = totalMinutes % 60;
        
        // Simple 0-4 hour labels (e.g., 0:15, 1:30)
        const timeLabel = `${hours}:${mins === 0 ? '00' : mins}`;
        const slotId = `slot_${i}`;

        const div = document.createElement('div');
        div.className = 'segment';
        div.innerHTML = `
            <div class="time">${timeLabel}</div>
            <input type="text" id="${slotId}" placeholder="Plan segment..." 
                   oninput="saveToCloud('${slotId}', this.value)">
        `;
        scheduleContainer.appendChild(div);
    }

    // FUNCTION: Save to Firebase when someone types
    function saveToCloud(id, text) {
        db.ref('schedule/' + id).set(text);
    }

    // FUNCTION: Listen for changes from OTHER producers
    db.ref('schedule').on('value', (snapshot) => {
        const data = snapshot.val();
        if (data) {
            for (let id in data) {
                const input = document.getElementById(id);
                // Only update the box if the user isn't currently typing in it
                if (input && document.activeElement !== input) {
                    input.value = data[id];
                }
            }
        }
    });
</script>
</body>
</html>