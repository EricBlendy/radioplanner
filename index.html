<script>
    // Your Firebase Config
    const firebaseConfig = {
        databaseURL: "https://radioplanner-d6a88-default-rtdb.asia-southeast1.firebasedatabase.app/"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const scheduleContainer = document.getElementById('schedule');
    
    // 24 slots = 4 hours (6 slots per hour)
    for (let i = 0; i < 24; i++) {
        const totalMinutes = i * 10; // 10-minute increments
        const startHour = 6; // Starts at 6 AM
        
        const currentHour = startHour + Math.floor(totalMinutes / 60);
        const currentMins = totalMinutes % 60;
        
        // Formatting: ensures "6:0" becomes "6:00"
        const displayMins = currentMins === 0 ? '00' : currentMins;
        const timeLabel = `${currentHour}:${displayMins}`;
        const slotId = `slot_${i}`;

        const div = document.createElement('div');
        div.className = 'segment';
        div.innerHTML = `
            <div class="time">${timeLabel}</div>
            <input type="text" id="${slotId}" placeholder="6AM - 10AM Breakfast Show..." 
                   oninput="saveToCloud('${slotId}', this.value)">
        `;
        scheduleContainer.appendChild(div);
    }

    // Save to Firebase
    function saveToCloud(id, text) {
        db.ref('schedule/' + id).set(text);
    }

    // Listen for live updates
    db.ref('schedule').on('value', (snapshot) => {
        const data = snapshot.val();
        if (data) {
            for (let id in data) {
                const input = document.getElementById(id);
                // Prevent jumping cursor: don't update if the producer is currently typing
                if (input && document.activeElement !== input) {
                    input.value = data[id];
                }
            }
        }
    });
</script>
