<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radio Show Producer Clock</title>
    <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-database-compat.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #1a1a1a; color: white; padding: 20px; }
        .schedule-grid { max-width: 800px; margin: 0 auto; display: grid; gap: 10px; }
        .segment { display: flex; align-items: center; background: #333; padding: 10px; border-radius: 5px; }
        .time { width: 80px; font-weight: bold; color: #00d4ff; }
        input { flex-grow: 1; padding: 10px; border: none; border-radius: 3px; background: #444; color: white; font-size: 1rem; }
        input:focus { background: #555; outline: 2px solid #00d4ff; }
        h1 { text-align: center; color: #00d4ff; }
    </style>
</head>
<body>

    <h1>ON-AIR PRODUCER PLANNER</h1>
    <div id="schedule" class="schedule-grid">
        </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

<script>
    // Your Firebase Config
    const firebaseConfig = {
        databaseURL: "https://radioplanner-d6a88-default-rtdb.asia-southeast1.firebasedatabase.app/"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const scheduleContainer = document.getElementById('schedule');
    
    // 24 slots = 4 hours (6 slots per hour)
    for (let i = 0; i < 24; i++) {
        const totalMinutes = i * 10; // 10-minute increments
        const startHour = 6; // Starts at 6 AM
        
        const currentHour = startHour + Math.floor(totalMinutes / 60);
        const currentMins = totalMinutes % 60;
        
        // Formatting: ensures "6:0" becomes "6:00"
        const displayMins = currentMins === 0 ? '00' : currentMins;
        const timeLabel = `${currentHour}:${displayMins}`;
        const slotId = `slot_${i}`;

        const div = document.createElement('div');
        div.className = 'segment';
        div.innerHTML = `
            <div class="time">${timeLabel}</div>
            <input type="text" id="${slotId}" placeholder="6AM - 10AM Breakfast Show..." 
                   oninput="saveToCloud('${slotId}', this.value)">
        `;
        scheduleContainer.appendChild(div);
    }

    // Save to Firebase
    function saveToCloud(id, text) {
        db.ref('schedule/' + id).set(text);
    }

    // Listen for live updates
    db.ref('schedule').on('value', (snapshot) => {
        const data = snapshot.val();
        if (data) {
            for (let id in data) {
                const input = document.getElementById(id);
                // Prevent jumping cursor: don't update if the producer is currently typing
                if (input && document.activeElement !== input) {
                    input.value = data[id];
                }
            }
        }
    });
</script>
</body>
</html>
